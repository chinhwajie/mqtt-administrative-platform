<div class="container">
  <!-- Total Messages Received Card -->
  <div class="card mb-4">
    <div class="card-body text-center">
      <div class="row">
        <div class="col-md-6">
          <h2>Total Messages Received</h2>
          <div class="d-flex flex-column align-items-center">
            <button class="btn btn-primary btn-lg mb-3 w-100" (click)="updateTotalDevicesCount()">
              <h1 style="font-size: 58px; padding: 20px">{{totalMessagesReceived}}</h1>
              <span class="d-block">Update Now</span>
            </button>
            <h4 class="mb-2 text-muted">Last Update: {{lastUpdate}}</h4>
          </div>
        </div>
        <div class="col-md-6">
          <h2>Top Visited Topics</h2>
          <table class="table">
            <thead>
            <tr>
              <th scope="col">Topic</th>
              <th scope="col">Count</th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let element of topVisitedTopics">
              <td>{{element.name}}</td>
              <td>{{element.count}}</td>
            </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <!-- General Devices Statistic Card -->
  <div class="card mb-4">
    <div class="card-body">
      <div class="row">
        <div class="col-md-6">
<!--          <ngx-charts-line-chart [view]="[600, 300]" [results]="lineChartData" [xAxis]="true"-->
<!--                                 [yAxis]="true"></ngx-charts-line-chart>-->
        </div>
        <div class="col-md-6">
<!--          <ngx-charts-pie-chart [results]="pieChartDeviceCategories" [view]="[500, 300]" [explodeSlices]="true"-->
<!--                                [labels]="true" [legend]="true" [legendTitle]="'Category'"></ngx-charts-pie-chart>-->
<!--          <ngx-charts-pie-chart [results]="pieChartDeviceStatus" [view]="[500, 300]" [explodeSlices]="false"-->
<!--                                [labels]="true" [legend]="true" [legendTitle]="'Status'"></ngx-charts-pie-chart>-->

        </div>
      </div>
      <div class="row">
        <div class="col-md-6">
          <div class="card">
            <div class="card-body">Total Devices: {{totalDevicesCount}}</div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="card">
            <div class="card-body">
<!--              <ngx-charts-bar-horizontal [results]="onlineDevices" [xAxis]="true" [yAxis]="true" [legend]="true"-->
<!--                                         [legendTitle]="'Devices State'" [legendPosition]="LegendPosition.Right"-->
<!--                                         [roundEdges]="true"-->
<!--              ></ngx-charts-bar-horizontal>-->
              <canvas baseChart
                      [datasets]="barChartData"
                      [labels]="barChartLabels"
                      [options]="barChartOptions"
                      [legend]="barChartLegend"
              ></canvas>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Device Status Card -->
  <div class="card mb-4">
    <div class="card-body">
      <div class="row">
        <div class="col">
          <app-amap></app-amap>
        </div>
      </div>
    </div>
  </div>
</div>
